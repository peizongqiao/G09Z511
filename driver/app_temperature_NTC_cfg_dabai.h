/*
 * xxxxxx.h
 *
 * Created: 2018/10/10 14:53:06
 *  Author:
 */
#ifndef __APP_TEMPERATURE_NTC_CFG_DABAI_H__
#define __APP_TEMPERATURE_NTC_CFG_DABAI_H__

#include "GMtypes.h"
#include "adc_basic.h"
#include "bsp_adc.h"
#include "utils.h"

/*
*电压采样值-温度映射表。uints:mv | ℃
*映射表根据电压大小排序
*/
static const coordinateXY_node_t voltage_temp_board_env_table[] =
{
    {0,     127},
    {239,   90},
    {246,   89},
    {253,   88},
    {261,   87},
    {269,   86},
    {277,   85},
    {286,   84},
    {295,   83},
    {304,   82},
    {314,   81},
    {323,   80},
    {333,   79},
    {344,   78},
    {355,   77},
    {366,   76},
    {377,   75},
    {389,   74},
    {402,   73},
    {414,   72},
    {427,   71},
    {441,   70},
    {455,   69},
    {469,   68},
    {484,   67},
    {500,   66},
    {516,   65},
    {532,   64},
    {549,   63},
    {567,   62},
    {585,   61},
    {603,   60},
    {622,   59},
    {642,   58},
    {662,   57},
    {683,   56},
    {705,   55},
    {727,   54},
    {750,   53},
    {773,   52},
    {798,   51},
    {822,   50},
    {848,   49},
    {874,   48},
    {901,   47},
    {928,   46},
    {957,   45},
    {985,   44},
    {1015,  43},
    {1045,  42},
    {1076,  41},
    {1108,  40},
    {1140,  39},
    {1173,  38},
    {1206,  37},
    {1240,  36},
    {1275,  35},
    {1310,  34},
    {1346,  33},
    {1383,  32},
    {1420,  31},
    {1457,  30},
    {1495,  29},
    {1533,  28},
    {1572,  27},
    {1611,  26},
    {1650,  25},
    {1690,  24},
    {1729,  23},
    {1769,  22},
    {1809,  21},
    {1850,  20},
    {1890,  19},
    {1930,  18},
    {1970,  17},
    {2010,  16},
    {2050,  15},
    {2090,  14},
    {2129,  13},
    {2168,  12},
    {2207,  11},
    {2245,  10},
    {2283,   9},
    {2320,   8},
    {2357,   7},
    {2393,   6},
    {2429,   5},
    {2463,   4},
    {2498,   3},
    {2531,   2},
    {2564,   1},
    {2596,   0},
    {2627,  -1},
    {2657,  -2},
    {2687,  -3},
    {2715,  -4},
    {2743,  -5},
    {2770,  -6},
    {2796,  -7},
    {2821,  -8},
    {2846,  -9},
    {2869,  -10},
    {2892,  -11},
    {2913,  -12},
    {2934,  -13},
    {2954,  -14},
    {2973,  -15},
    {2992,  -16},
    {3009,  -17},
    {3026,  -18},
    {3042,  -19},
    {3057,  -20},
    {3072,  -21},
    {3086,  -22},
    {3099,  -23},
    {3111,  -24},
    {3123,  -25},
    {3135,  -26},
    {3145,  -27},
    {3155,  -28},
    {3165,  -29},
    {3300,  -128},
};

//温感系数：4250, 25℃欧姆：100000, ln100000 : 11.51292546, B/T1 : 14.25456985, 上拉电阻(欧姆) : 100000, VCC(V): 5.0
static const coordinateXY_node_t voltage_temp_dmd_table[] =
{
    {0 , 127},
    {771 ,90},
    {790 ,89},
    {809 ,88},
    {828 ,87},
    {848 ,86},
    {868 ,85},
    {889 ,84},
    {910 ,83},
    {932 ,82},
    {954 ,81},
    {976 ,80},
    {999 ,79},
    {1022 ,78},
    {1046 ,77},
    {1070 ,76},
    {1094 ,75},
    {1119 ,74},
    {1144 ,73},
    {1170 ,72},
    {1196 ,71},
    {1222 ,70},
    {1248 ,69},
    {1275 ,68},
    {1303 ,67},
    {1330 ,66},
    {1358 ,65},
    {1387 ,64},
    {1415 ,63},
    {1444 ,62},
    {1473 ,61},
    {1503 ,60},
    {1532 ,59},
    {1562 ,58},
    {1592 ,57},
    {1623 ,56},
    {1653 ,55},
    {1684 ,54},
    {1714 ,53},
    {1745 ,52},
    {1776 ,51},
    {1807 ,50},
    {1838 ,49},
    {1869 ,48},
    {1900 ,47},
    {1931 ,46},
    {1962 ,45},
    {1993 ,44},
    {2024 ,43},
    {2055 ,42},
    {2086 ,41},
    {2116 ,40},
    {2147 ,39},
    {2177 ,38},
    {2207 ,37},
    {2236 ,36},
    {2265 ,35},
    {2294 ,34},
    {2323 ,33},
    {2352 ,32},
    {2379 ,31},
    {2407 ,30},
    {2434 ,29},
    {2461 ,28},
    {2487 ,27},
    {2513 ,26},
    {2538 ,25},
    {2563 ,24},
    {2588 ,23},
    {2611 ,22},
    {2635 ,21},
    {2658 ,20},
    {2680 ,19},
    {2701 ,18},
    {2723 ,17},
    {2743 ,16},
    {2763 ,15},
    {2783 ,14},
    {2802 ,13},
    {2820 ,12},
    {2838 ,11},
    {2855 ,10},
    {2872 ,9},
    {2888 ,8},
    {2904 ,7},
    {2919 ,6},
    {2934 ,5},
    {2948 ,4},
    {2962 ,3},
    {2976 ,2},
    {2989 ,1},
    {3002 ,0},
    {3014 ,-1},
    {3026 ,-2},
    {3037 ,-3},
    {3048 ,-4},
    {3059 ,-5},
    {3070 ,-6},
    {3080 ,-7},
    {3090 ,-8},
    {3099 ,-9},
    {3108 ,-10},
    {3117 ,-11},
    {3126 ,-12},
    {3134 ,-13},
    {3142 ,-14},
    {3150 ,-15},
    {3157 ,-16},
    {3165 ,-17},
    {3172 ,-18},
    {3178 ,-19},
    {3185 ,-20},
    {3191 ,-21},
    {3196 ,-22},
    {3202 ,-23},
    {3207 ,-24},
    {3212 ,-25},
    {3217 ,-26},
    {3222 ,-27},
    {3226 ,-28},
    {3230 ,-29},
    {3300,  -128},
};

static const coordinateXY_node_t voltage_temp_cw_table[] =
{
    {0 , 127},
    {103 ,90},
    {106 ,89},
    {109 ,88},
    {112 ,87},
    {115 ,86},
    {119 ,85},
    {122 ,84},
    {126 ,83},
    {129 ,82},
    {133 ,81},
    {137 ,80},
    {142 ,79},
    {146 ,78},
    {150 ,77},
    {155 ,76},
    {160 ,75},
    {165 ,74},
    {170 ,73},
    {175 ,72},
    {181 ,71},
    {187 ,70},
    {193 ,69},
    {199 ,68},
    {205 ,67},
    {212 ,66},
    {219 ,65},
    {226 ,64},
    {233 ,63},
    {241 ,62},
    {249 ,61},
    {257 ,60},
    {265 ,59},
    {274 ,58},
    {283 ,57},
    {292 ,56},
    {302 ,55},
    {312 ,54},
    {323 ,53},
    {334 ,52},
    {345 ,51},
    {357 ,50},
    {369 ,49},
    {381 ,48},
    {394 ,47},
    {408 ,46},
    {422 ,45},
    {436 ,44},
    {451 ,43},
    {466 ,42},
    {482 ,41},
    {499 ,40},
    {516 ,39},
    {534 ,38},
    {552 ,37},
    {571 ,36},
    {591 ,35},
    {611 ,34},
    {632 ,33},
    {653 ,32},
    {676 ,31},
    {699 ,30},
    {723 ,29},
    {747 ,28},
    {772 ,27},
    {798 ,26},
    {825 ,25},
    {853 ,24},
    {881 ,23},
    {910 ,22},
    {940 ,21},
    {971 ,20},
    {1002 ,19},
    {1034 ,18},
    {1067 ,17},
    {1101 ,16},
    {1136 ,15},
    {1171 ,14},
    {1207 ,13},
    {1244 ,12},
    {1282 ,11},
    {1320 ,10},
    {1359 ,9},
    {1398 ,8},
    {1438 ,7},
    {1479 ,6},
    {1520 ,5},
    {1561 ,4},
    {1603 ,3},
    {1646 ,2},
    {1688 ,1},
    {1731 ,0},
    {1774 ,-1},
    {1818 ,-2},
    {1861 ,-3},
    {1904 ,-4},
    {1948 ,-5},
    {1991 ,-6},
    {2034 ,-7},
    {2077 ,-8},
    {2119 ,-9},
    {2162 ,-10},
    {2203 ,-11},
    {2245 ,-12},
    {2285 ,-13},
    {2326 ,-14},
    {2365 ,-15},
    {2404 ,-16},
    {2442 ,-17},
    {2479 ,-18},
    {2516 ,-19},
    {2552 ,-20},
    {2586 ,-21},
    {2620 ,-22},
    {2653 ,-23},
    {2685 ,-24},
    {2716 ,-25},
    {2746 ,-26},
    {2775 ,-27},
    {2803 ,-28},
    {2830 ,-29},
    {3300,  -128},
};

static const coordinateXY_node_t voltage_temp_laser_table[] =
{
    {0 , 127},
    {725 ,90},
    {739 ,89},
    {754 ,88},
    {769 ,87},
    {785 ,86},
    {801 ,85},
    {817 ,84},
    {833 ,83},
    {850 ,82},
    {867 ,81},
    {884 ,80},
    {902 ,79},
    {920 ,78},
    {938 ,77},
    {957 ,76},
    {976 ,75},
    {995 ,74},
    {1014 ,73},
    {1034 ,72},
    {1055 ,71},
    {1075 ,70},
    {1096 ,69},
    {1117 ,68},
    {1139 ,67},
    {1161 ,66},
    {1183 ,65},
    {1205 ,64},
    {1228 ,63},
    {1251 ,62},
    {1275 ,61},
    {1299 ,60},
    {1323 ,59},
    {1347 ,58},
    {1372 ,57},
    {1397 ,56},
    {1422 ,55},
    {1447 ,54},
    {1473 ,53},
    {1499 ,52},
    {1525 ,51},
    {1552 ,50},
    {1578 ,49},
    {1605 ,48},
    {1632 ,47},
    {1659 ,46},
    {1687 ,45},
    {1714 ,44},
    {1742 ,43},
    {1770 ,42},
    {1798 ,41},
    {1826 ,40},
    {1854 ,39},
    {1882 ,38},
    {1910 ,37},
    {1938 ,36},
    {1966 ,35},
    {1995 ,34},
    {2023 ,33},
    {2051 ,32},
    {2079 ,31},
    {2107 ,30},
    {2135 ,29},
    {2162 ,28},
    {2190 ,27},
    {2218 ,26},
    {2245 ,25},
    {2272 ,24},
    {2299 ,23},
    {2326 ,22},
    {2352 ,21},
    {2378 ,20},
    {2404 ,19},
    {2430 ,18},
    {2455 ,17},
    {2480 ,16},
    {2505 ,15},
    {2529 ,14},
    {2553 ,13},
    {2577 ,12},
    {2600 ,11},
    {2623 ,10},
    {2645 ,9},
    {2667 ,8},
    {2689 ,7},
    {2710 ,6},
    {2731 ,5},
    {2751 ,4},
    {2771 ,3},
    {2790 ,2},
    {2809 ,1},
    {2828 ,0},
    {2846 ,-1},
    {2863 ,-2},
    {2880 ,-3},
    {2897 ,-4},
    {2913 ,-5},
    {2929 ,-6},
    {2944 ,-7},
    {2959 ,-8},
    {2974 ,-9},
    {2988 ,-10},
    {3001 ,-11},
    {3014 ,-12},
    {3027 ,-13},
    {3039 ,-14},
    {3051 ,-15},
    {3063 ,-16},
    {3074 ,-17},
    {3084 ,-18},
    {3094 ,-19},
    {3104 ,-20},
    {3114 ,-21},
    {3123 ,-22},
    {3132 ,-23},
    {3140 ,-24},
    {3148 ,-25},
    {3156 ,-26},
    {3163 ,-27},
    {3171 ,-28},
    {3177 ,-29},
    {3300,  -128},
};

// ======================== configure ======================

// NTC任务轮训周期
#undef TEMP_CFG_TASK_POLL_MS
#define TEMP_CFG_TASK_POLL_MS                                50u

// NTC 驱动板，温度测量是否使用（0-不使用；1-使用）
#undef NTC_CFG_BOARD_IS_USE
#define NTC_CFG_BOARD_IS_USE  															1
// NTC G灯，温度测量是否使用（0-不使用；1-使用）
#undef NTC_CFG_G_LED_IS_USE
#define NTC_CFG_G_LED_IS_USE                                1
// NTC R灯，温度测量是否使用（0-不使用；1-使用）
#undef NTC_CFG_R_LED_IS_USE
#define NTC_CFG_R_LED_IS_USE                                1
// NTC BP灯，温度测量是否使用（0-不使用；1-使用）
#undef NTC_CFG_BP_LED_IS_USE
#define NTC_CFG_BP_LED_IS_USE  															1
// NTC 环境，温度测量是否使用（0-不使用；1-使用）
#undef NTC_CFG_ENV_IS_USE
#define NTC_CFG_ENV_IS_USE                                  1
// NTC DMD，温度测量是否使用（0-不使用；1-使用）
#undef NTC_CFG_DMD_IS_USE
#define NTC_CFG_DMD_IS_USE                                  1
// NTC 色轮，温度测量是否使用（0-不使用；1-使用）
#undef NTC_CFG_CW_IS_USE
#define NTC_CFG_CW_IS_USE                                   1

// 配置：NTC ADC 测温通道
// 驱动板(board)
#undef NTC_CFG_BOARD_ADC_CHANNEL
#define NTC_CFG_BOARD_ADC_CHANNEL                              (ADC_CH_14_PC3)
// G_led(G灯)
#undef NTC_CFG_G_LED_ADC_CHANNEL
#define NTC_CFG_G_LED_ADC_CHANNEL                              (ADC_CH_6_PA5)
// R_led(R灯)
#undef NTC_CFG_R_LED_ADC_CHANNEL
#define NTC_CFG_R_LED_ADC_CHANNEL                              (ADC_CH_7_PA6)
// BP_led(BP灯)
#undef NTC_CFG_BP_LED_ADC_CHANNEL
#define NTC_CFG_BP_LED_ADC_CHANNEL                             (ADC_CH_8_PA7)
// env(环境)
#undef NTC_CFG_ENV_ADC_CHANNEL
#define NTC_CFG_ENV_ADC_CHANNEL                              	 (ADC_CH_15_PC4)
// dmd(DMD)
#undef NTC_CFG_DMD_ADC_CHANNEL
#define NTC_CFG_DMD_ADC_CHANNEL                                (ADC_CH_16_PC5)
// cw(色轮)
#undef NTC_CFG_CW_ADC_CHANNEL
#define NTC_CFG_CW_ADC_CHANNEL                              	 (ADC_CH_9_PB0)

// 配置：ADC值转换为电压值系数(强制扩大1000倍，提高计算精度)，5000*(1000)/(2^10-1)
#undef NTC_CFG_ADC2VOL_FACTOR
#define NTC_CFG_ADC2VOL_FACTOR                              (((uint32_t)1000)*3300/1023)

// 配置：NTC电压-温度表
#undef NTC_CFG_BOARD_VOL2TEMP_TABLE
#define NTC_CFG_BOARD_VOL2TEMP_TABLE                          voltage_temp_board_env_table

#undef NTC_CFG_G_LED_VOL2TEMP_TABLE
#define NTC_CFG_G_LED_VOL2TEMP_TABLE                        voltage_temp_laser_table

#undef NTC_CFG_R_LED_VOL2TEMP_TABLE
#define NTC_CFG_R_LED_VOL2TEMP_TABLE                           voltage_temp_laser_table

#undef NTC_CFG_BP_LED_VOL2TEMP_TABLE
#define NTC_CFG_BP_LED_VOL2TEMP_TABLE                           voltage_temp_laser_table

#undef NTC_CFG_ENV_VOL2TEMP_TABLE
#define NTC_CFG_ENV_VOL2TEMP_TABLE                           voltage_temp_board_env_table

#undef NTC_CFG_DMD_VOL2TEMP_TABLE
#define NTC_CFG_DMD_VOL2TEMP_TABLE                           voltage_temp_dmd_table

#undef NTC_CFG_CW_VOL2TEMP_TABLE
#define NTC_CFG_CW_VOL2TEMP_TABLE                           voltage_temp_cw_table

#undef NTC_CFG_LASER_VOL2TEMP_TABLE
#define NTC_CFG_LASER_VOL2TEMP_TABLE                           voltage_temp_laser_table


#endif /* __APP_TEMPERATURE_NTC_CFG_DABAI_H__ */



